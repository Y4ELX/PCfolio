<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/logoyael.png" type="image/x-icon">
    <title>Yael Monterrubio Portafolio</title>
    <style>
        @font-face {
            font-family: pixel;
            src: url(assets/pixel.ttf);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: pixel;
            user-select: none;
            overflow: hidden;
        }

        html{
            scrollbar-color: #40ff23 var(--color-bg);
        }

        .mainDiv {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background-color: #f1f1f1;
        }

        .desktop {
            height: calc(92% - 20px);
            width: calc(100% - 20px);
            padding: 10px;
            background-color: #151924;
            display: grid;
            grid-template-rows: repeat(5, 100px);
            grid-auto-columns: min-content;
            grid-auto-flow: column;
            row-gap: 15px;
            column-gap: 15px;
            justify-items: start;
            align-items: center;
        }

        .taskbar {
            height: 8%;
            width: calc(100% - 30px);
            background-color: #0c0e14;
            padding-left: 10px;
            padding-right: 30px;
            display: flex;
            align-items: center;
            position: relative;
            z-index: 1000;
        }

        .divicon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 10px;
            width: fit-content;
            cursor: pointer;
        }

        .divicon img {
            width: 50px;
            height: 50px;
        }

        .window {
            height: 60vh;
            width: 60vw;
            position: absolute;
            top: 50px;
            left: 50px;
            min-width: 20px;
            min-height: 20px;
            background-color: #151924;
            border: solid 3px #40FF23;
            padding: 3px;
            resize: both;
            overflow: hidden;
        }

        .window-header {
            height: 25px;
            background-color: #40FF23;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px;
            cursor: grab;
        }

        .close-btn, .maximize-btn, .minimize-btn{
            cursor: pointer;
            height: 100%;
            width: 25px;
            background-color: #151924;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #40FF23;
        }

        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            background-color: #40FF23;
            cursor: nwse-resize;
        }

        .divicon>p {
            width: 85px;
            font-size: 13px;
            color: #40FF23;
            text-align: center;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .window-content{
            height: calc(100% - 30px);
            width: 100%;
        }

        .label {
            width: 70px;
        }

        .hora{
            color: #40FF23;
            margin: 0px;
            padding: 0px;
        }

        .horaDiv{
            display: flex;
            color: #40FF23;
            width: 150px;
            margin: 0px;
            padding: 0px;
            height: 100%;
            text-align: center;
            justify-content: end;
            align-items: center;
        }

        .taskbarApplications {
            flex: 1;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 5px;
            padding-left: 10px;
        }

        .taskbar-app {
            padding: 5px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }

        .taskbar-app img {
            width: 30px;
            height: 30px;
        }

        .taskbar-app:hover {
            background-color: #30cc1c26;
            border-radius: 10px;
        }

        .window-maximizing {
            transition: all 0.3s ease-in-out !important;
        }

        .window-minimizing {
            transition: all 0.4s ease-in-out !important;
            transform-origin: center center;
        }

        .start-menu {
            position: absolute;
            bottom: 100%;
            left: 0;
            width: 300px;
            background-color: #0c0e14;
            border: 2px solid #40FF23;
            border-bottom: none;
            display: none;
            z-index: 2000;
        }

        .start-menu.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .start-menu-header {
            background: linear-gradient(90deg, #40FF23 0%, #30cc1c 100%);
            color: #151924;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #40FF23;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #151924;
            border: 2px solid #151924;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 14px;
            font-weight: bold;
            margin: 0;
        }

        .user-status {
            font-size: 11px;
            margin: 0;
            opacity: 0.8;
        }

        .start-menu-content {
            padding: 10px 0;
        }

        .start-menu-section {
            margin-bottom: 15px;
        }

        .start-menu-title {
            color: #40FF23;
            font-size: 12px;
            padding: 5px 15px;
            margin: 0;
            border-bottom: 1px solid #30363d;
            background-color: #1a1f2e;
        }

        .start-menu-item {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            color: #40FF23;
            cursor: pointer;
            font-size: 12px;
            gap: 10px;
            transition: background-color 0.2s;
        }

        .start-menu-item:hover {
            background-color: #1a1f2e;
        }

        .start-menu-item img {
            width: 20px;
            height: 20px;
        }

        .start-menu-separator {
            height: 1px;
            background-color: #30363d;
            margin: 5px 0;
        }
    </style>
</head>

<body>
    <div class="mainDiv">
        <div class="desktop">
            <div class="divicon" data-title="My PC">
                <img src="assets/mypc.png" alt="">
                <p class="label">My PC</p>
            </div>
            <div class="divicon" data-title="New Folder">
                <img src="assets/folder.png" alt="">
                <p class="label">NewF</p>
            </div>
            <div class="divicon" data-title="GitHub">
                <img src="assets/GitHub.png" alt="">
                <p class="label">GitHub Profile</p>
            </div>
            <div class="divicon" data-title="CV / Resume">
                <img src="assets/file.png" alt="">
                <p class="label">Curriculum Vitae</p>
            </div>
            <div class="divicon" data-title="Projects">
                <img src="assets/navegador.png" alt="">
                <p class="label">Projects</p>
            </div>
            <div class="divicon" data-title="TampiGuessr">
                <img src="assets/TampiGuessr.png" alt="">
                <p class="label">TampiGuessr</p>
            </div>
            <div class="divicon" data-title="README.txt">
                <img src="assets/file.png" alt="">
                <p class="label">README.txt</p>
            </div>
        </div>
        <div class="taskbar">
            <div class="start-button" id="start-button">
                <img src="assets/logoyael.png" style="height: auto; width: 35px; cursor: pointer; margin-right: 10px;" alt="">
            </div>

            <div class="start-menu" id="start-menu">
                <div class="start-menu-header">
                    <img src="assets/logoyael.png" class="user-avatar" alt="User">
                    <div class="user-info">
                        <p class="user-name">Yael Monterrubio</p>
                        <p class="user-status">Desarrollador</p>
                    </div>
                </div>
                <div class="start-menu-content">
                    <div class="start-menu-section">
                        <h3 class="start-menu-title">Aplicaciones Recientes</h3>
                        <div id="recent-apps">
                            <div class="start-menu-item" onclick="showMessage('No hay aplicaciones recientes')">
                                <span>No hay aplicaciones recientes</span>
                            </div>
                        </div>
                    </div>
                    <div class="start-menu-separator"></div>
                    <div class="start-menu-section">
                        <div class="start-menu-item" onclick="showAllPrograms()">
                            <img src="assets/folder.png" alt="">
                            <span>Todos los programas</span>
                        </div>
                        <div class="start-menu-item" onclick="showMessage('Configuraci贸n no implementada')">
                            <img src="assets/mypc.png" alt="">
                            <span>Configuraci贸n</span>
                        </div>
                    </div>
                </div>
            </div>

            <div style="height: 70%; width: 1px; background-color: #103f08;"></div>

            <div class="taskbarApplications">

            </div>

            <div class="horaDiv">
                <p class="hora">
                </p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let desktop = document.querySelector(".desktop");
            let icons = document.querySelectorAll(".divicon");
            let taskbarApplications = document.querySelector(".taskbarApplications");
            let windowCount = 0;
            let recentApps = [];
            let startButton = document.getElementById("start-button");
            let startMenu = document.getElementById("start-menu");
            let isMenuOpen = false;

            // Event listener para el bot贸n de inicio
            startButton.addEventListener("click", function(e) {
                e.stopPropagation();
                toggleStartMenu();
            });

            // Cerrar men煤 al hacer click fuera
            document.addEventListener("click", function(e) {
                if (isMenuOpen && !startMenu.contains(e.target) && !startButton.contains(e.target)) {
                    closeStartMenu();
                }
            });

            function toggleStartMenu() {
                if (isMenuOpen) {
                    closeStartMenu();
                } else {
                    openStartMenu();
                }
            }

            function openStartMenu() {
                startMenu.classList.add("show");
                isMenuOpen = true;
                updateRecentApps();
            }

            function closeStartMenu() {
                startMenu.classList.remove("show");
                isMenuOpen = false;
            }

            function updateRecentApps() {
                const recentAppsContainer = document.getElementById("recent-apps");
                recentAppsContainer.innerHTML = "";

                if (recentApps.length === 0) {
                    recentAppsContainer.innerHTML = '<div class="start-menu-item"><span>No hay aplicaciones recientes</span></div>';
                } else {
                    recentApps.slice(-5).reverse().forEach(app => {
                        const item = document.createElement("div");
                        item.className = "start-menu-item";
                        item.onclick = () => {
                            createWindow(app.title);
                            closeStartMenu();
                        };
                        item.innerHTML = `<img src="${app.icon}" alt=""><span>${app.title}</span>`;
                        recentAppsContainer.appendChild(item);
                    });
                }
            }

            function addToRecentApps(title) {
                let icon = "assets/folder.png"; // icono por defecto
                
                // Asignar icono seg煤n la aplicaci贸n
                switch(title) {
                    case "GitHub":
                        icon = "assets/GitHub.png";
                        break;
                    case "My PC":
                        icon = "assets/mypc.png";
                        break;
                    case "New Folder":
                        icon = "assets/folder.png";
                        break;
                    case "CV / Resume":
                        icon = "assets/file.png";
                        break;
                    case "Projects":
                        icon = "assets/navegador.png";
                        break;
                    case "TampiGuessr":
                        icon = "assets/TampiGuessr.png";
                        break;
                    case "README.txt":
                        icon = "assets/file.png";
                        break;
                    case "README.txt - Notepad":
                        icon = "assets/file.png";
                        break;
                }

                // Remover si ya existe
                recentApps = recentApps.filter(app => app.title !== title);
                
                // Agregar al final
                recentApps.push({ title, icon });
                
                // Mantener solo los 煤ltimos 10
                if (recentApps.length > 10) {
                    recentApps.shift();
                }
            }

            window.showMessage = function(message) {
                alert(message);
                closeStartMenu();
            }

            window.showAllPrograms = function() {
                alert("Todos los programas est谩n en el escritorio");
                closeStartMenu();
            }

            window.openReadmeFile = function() {
                createWindow("README.txt - Notepad");
            }

            icons.forEach(icon => {
                icon.addEventListener("click", () => {
                    createWindow(icon.getAttribute("data-title"), icon);
                });
            });

            setInterval(() => {
                let date = new Date();
                let hours = String(date.getHours()).padStart(2, '0');
                let minutes = String(date.getMinutes()).padStart(2, '0');
                let isAmOrPm = hours >= 12 ? 'PM' : 'AM';
                hours = hours % 12 || 12;
                document.querySelector(".hora").textContent = `${hours}:${minutes} ${isAmOrPm}`;
            }, 1000);

            function createWindow(title) {
                windowCount++;
                let windowId = `window-${windowCount}`;

                // Agregar a aplicaciones recientes
                addToRecentApps(title);

                let windowDiv = document.createElement("div");
                windowDiv.classList.add("window");
                windowDiv.id = windowId;
                windowDiv.style.opacity = 0;
                windowDiv.style.transform = "scaleY(0)";
                windowDiv.style.transition = "0.3s ease-in";

                setTimeout(() => {
                    windowDiv.style.transform = "scaleY(1)";
                    windowDiv.style.opacity = 1;
                    setTimeout(() => {
                        windowDiv.style.transition = "none";
                    }, 300);
                }, 50);
                windowDiv.style.top = `${110 + windowCount * 20}px`;
                windowDiv.style.left = `${260 + windowCount * 20}px`;

                let content = "";

                switch(title) {
                    case "GitHub":
                        windowDiv.style.width = "70vw";
                        windowDiv.style.height = "80vh";
                        windowDiv.style.top = "calc(45% - 40vh)";
                        windowDiv.style.left = "calc(50% - 35vw)";
                        content = `<iframe src="githubProfile.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    case "My PC":
                        windowDiv.style.width = "50vw";
                        windowDiv.style.height = "60vh";
                        content = `<p>Contenido de My PC</p>`;
                        break;
                    case "New Folder":
                        windowDiv.style.width = "70vw";
                        windowDiv.style.height = "70vh";
                        windowDiv.style.top = "calc(50% - 35vh)";
                        windowDiv.style.left = "calc(50% - 35vw)";
                        content = `<iframe src="fileExplorer.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    case "README.txt":
                        windowDiv.style.width = "75vw";
                        windowDiv.style.height = "75vh";
                        windowDiv.style.top = "calc(50% - 37.5vh)";
                        windowDiv.style.left = "calc(50% - 37.5vw)";
                        content = `<iframe src="notepad.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    case "README.txt - Notepad":
                        windowDiv.style.width = "75vw";
                        windowDiv.style.height = "75vh";
                        windowDiv.style.top = "calc(50% - 37.5vh)";
                        windowDiv.style.left = "calc(50% - 37.5vw)";
                        content = `<iframe src="notepad.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    case "CV / Resume":
                        windowDiv.style.width = "90vh";
                        windowDiv.style.height = "80vh";
                        windowDiv.style.top = "calc(45% - 40vh)";
                        windowDiv.style.left = "calc(50% - 45vh)";
                        content = `<iframe src="curriculumVitae.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    case "TampiGuessr":
                        // Iniciar maximizado
                        windowDiv.style.width = "calc(100vw - 10px)";
                        windowDiv.style.height = "calc(92vh - 10px)";
                        windowDiv.style.top = "0px";
                        windowDiv.style.left = "0px";
                        content = `<iframe src="https://tampiguessr-17a8b.web.app/" style="width: 100%; height: 100%; border: none;" allow="geolocation *; camera; microphone"></iframe>`;
                        break;
                    case "Projects":
                        windowDiv.style.width = "95vw";
                        windowDiv.style.height = "80vh";
                        windowDiv.style.top = "calc(45% - 40vh)";
                        windowDiv.style.left = "calc(50% - 47.5vw)";
                        content = `<iframe src="browser.html" style="width: 100%; height: 100%; border: none;"></iframe>`;
                        break;
                    default:
                        windowDiv.style.width = "60vw";
                        windowDiv.style.height = "60vh";
                        content = `<p>Contenido de ${title}</p>`;
                }

                windowDiv.innerHTML = `
                    <div class="window-header">
                        <span>${title}</span>
                        <div style="display: flex; flex-direction: row; gap: 5px; height: 100%;">
                            <div class="minimize-btn">_</div>
                            <div class="maximize-btn"></div>
                            <div class="close-btn">X</div>
                        </div>
                    </div>
                    <div class="window-content">
                        ${content}
                    </div>
                    <div class="resize-handle"></div>
                `;

                document.body.appendChild(windowDiv);

                // Crear el bot贸n en la taskbar
                addToTaskbar(title, windowId);

                addDragFunctionality(windowDiv);
                addResizeFunctionality(windowDiv);

                windowDiv.querySelector(".close-btn").addEventListener("click", () => {
                    windowDiv.style.transition = "0.3s ease-out"; 
                    windowDiv.style.opacity = 0; 
                    windowDiv.style.transform = "scaleY(0)"; 

                    // Remover de la taskbar
                    removeFromTaskbar(windowId);

                    setTimeout(() => {
                        windowDiv.remove();
                    }, 300);
                });

                // Funcionalidad del bot贸n minimizar
                windowDiv.querySelector(".minimize-btn").addEventListener("click", () => {
                    if (windowDiv.style.display !== "none") {
                        let taskbarApp = document.getElementById(`taskbar-${windowId}`);
                        if (taskbarApp) {
                            // Obtener posiciones actuales precisas
                            let windowRect = windowDiv.getBoundingClientRect();
                            let taskbarRect = taskbarApp.getBoundingClientRect();
                            
                            // Calcular el centro de la ventana y el centro del icono de la taskbar
                            let windowCenterX = windowRect.left + windowRect.width / 2;
                            let windowCenterY = windowRect.top + windowRect.height / 2;
                            let taskbarCenterX = taskbarRect.left + taskbarRect.width / 2;
                            let taskbarCenterY = taskbarRect.top + taskbarRect.height / 2;
                            
                            // Calcular la distancia desde el centro de la ventana al centro del icono
                            let deltaX = taskbarCenterX - windowCenterX;
                            let deltaY = taskbarCenterY - windowCenterY;
                            
                            // Agregar clase de animaci贸n
                            windowDiv.classList.add('window-minimizing');
                            
                            // Aplicar transformaci贸n hacia el centro del icono de la taskbar
                            windowDiv.style.transformOrigin = 'center center';
                            windowDiv.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(0.05)`;
                            windowDiv.style.opacity = '0';
                            
                            // Despu茅s de la animaci贸n, ocultar la ventana
                            setTimeout(() => {
                                windowDiv.style.display = "none";
                                windowDiv.style.transform = "";
                                windowDiv.style.opacity = "1";
                                windowDiv.style.transformOrigin = "";
                                windowDiv.classList.remove('window-minimizing');
                                taskbarApp.style.opacity = "0.5";
                            }, 400);
                        }
                    }
                });

                // Funcionalidad del bot贸n maximizar
                let isMaximized = false;
                let originalStyles = {
                    width: windowDiv.style.width,
                    height: windowDiv.style.height,
                    top: windowDiv.style.top,
                    left: windowDiv.style.left
                };

                // Si es TampiGuessr, empezar maximizado
                if (title === "TampiGuessr") {
                    isMaximized = true;
                    windowDiv.querySelector(".maximize-btn").textContent = "";
                    // Guardar los estilos originales (tama帽o peque帽o para cuando se restaure)
                    originalStyles = {
                        width: "95vw",
                        height: "90vh",
                        top: "calc(50% - 45vh)",
                        left: "calc(50% - 47.5vw)"
                    };
                }

                windowDiv.querySelector(".maximize-btn").addEventListener("click", () => {
                    // Agregar clase de animaci贸n
                    windowDiv.classList.add('window-maximizing');
                    
                    if (!isMaximized) {
                        // Guardar estilos originales
                        originalStyles = {
                            width: windowDiv.style.width,
                            height: windowDiv.style.height,
                            top: windowDiv.style.top,
                            left: windowDiv.style.left
                        };
                        
                        // Maximizar con animaci贸n
                        windowDiv.style.width = "calc(100vw - 10px)";
                        windowDiv.style.height = "calc(92vh - 10px)";
                        windowDiv.style.top = "0px";
                        windowDiv.style.left = "0px";
                        windowDiv.querySelector(".maximize-btn").textContent = "";
                        isMaximized = true;
                    } else {
                        // Restaurar con animaci贸n
                        windowDiv.style.width = originalStyles.width;
                        windowDiv.style.height = originalStyles.height;
                        windowDiv.style.top = originalStyles.top;
                        windowDiv.style.left = originalStyles.left;
                        windowDiv.querySelector(".maximize-btn").textContent = "";
                        isMaximized = false;
                    }
                    
                    // Remover clase de animaci贸n despu茅s de completarla
                    setTimeout(() => {
                        windowDiv.classList.remove('window-maximizing');
                    }, 300);
                });
            }

            function addToTaskbar(title, windowId) {
                let taskbarApp = document.createElement("div");
                taskbarApp.classList.add("taskbar-app");
                taskbarApp.id = `taskbar-${windowId}`;
                
                // Crear el elemento de imagen para el icono
                let iconImg = document.createElement("img");
                
                // Asignar el icono seg煤n el t铆tulo de la aplicaci贸n
                switch(title) {
                    case "GitHub":
                        iconImg.src = "assets/GitHub.png";
                        iconImg.alt = "GitHub";
                        break;
                    case "My PC":
                        iconImg.src = "assets/mypc.png";
                        iconImg.alt = "My PC";
                        break;
                    case "New Folder":
                        iconImg.src = "assets/folder.png";
                        iconImg.alt = "New Folder";
                        break;
                    case "CV / Resume":
                        iconImg.src = "assets/file.png";
                        iconImg.alt = "CV / Resume";
                        break;
                    case "Projects":
                        iconImg.src = "assets/navegador.png";
                        iconImg.alt = "Projects";
                        break;
                    case "README.txt":
                    case "README.txt - Notepad":
                        iconImg.src = "assets/file.png";
                        iconImg.alt = "README.txt";
                        break;
                    default:
                        iconImg.src = "assets/folder.png"; // Icono por defecto
                        iconImg.alt = title;
                }
                
                taskbarApp.appendChild(iconImg);
                
                // Hacer que al hacer click en el bot贸n de la taskbar, la ventana vuelva al frente o se restaure
                taskbarApp.addEventListener("click", () => {
                    let windowDiv = document.getElementById(windowId);
                    if (windowDiv) {
                        if (windowDiv.style.display === "none") {
                            // Si est谩 minimizada, restaurarla con animaci贸n desde el icono
                            let taskbarRect = taskbarApp.getBoundingClientRect();
                            
                            // Mostrar la ventana primero para obtener sus dimensiones
                            windowDiv.style.display = "block";
                            let windowRect = windowDiv.getBoundingClientRect();
                            
                            // Calcular centros
                            let taskbarCenterX = taskbarRect.left + taskbarRect.width / 2;
                            let taskbarCenterY = taskbarRect.top + taskbarRect.height / 2;
                            let windowCenterX = windowRect.left + windowRect.width / 2;
                            let windowCenterY = windowRect.top + windowRect.height / 2;
                            
                            // Calcular distancia desde el centro del icono al centro de la ventana
                            let deltaX = taskbarCenterX - windowCenterX;
                            let deltaY = taskbarCenterY - windowCenterY;
                            
                            // Empezar desde el icono de la taskbar (peque帽a y en la posici贸n del icono)
                            windowDiv.style.transformOrigin = 'center center';
                            windowDiv.style.transform = `translate(${deltaX}px, ${deltaY}px) scale(0.05)`;
                            windowDiv.style.opacity = '0';
                            windowDiv.classList.add('window-minimizing');
                            
                            // Animar hacia su posici贸n y tama帽o normal
                            setTimeout(() => {
                                windowDiv.style.transform = "";
                                windowDiv.style.opacity = "1";
                                
                                setTimeout(() => {
                                    windowDiv.style.transformOrigin = "";
                                    windowDiv.classList.remove('window-minimizing');
                                }, 400);
                            }, 50);
                            
                            taskbarApp.style.opacity = "1";
                        }
                        // Traer la ventana al frente
                        windowDiv.style.zIndex = getHighestZIndex() + 1;
                    }
                });

                taskbarApplications.appendChild(taskbarApp);
            }

            function removeFromTaskbar(windowId) {
                let taskbarApp = document.getElementById(`taskbar-${windowId}`);
                if (taskbarApp) {
                    taskbarApp.remove();
                }
            }

            function getHighestZIndex() {
                let windows = document.querySelectorAll('.window');
                let highest = 0;
                windows.forEach(window => {
                    let zIndex = parseInt(window.style.zIndex) || 0;
                    if (zIndex > highest) {
                        highest = zIndex;
                    }
                });
                return highest;
            }

            function addDragFunctionality(windowDiv) {
                let header = windowDiv.querySelector(".window-header");
                let offsetX = 0, offsetY = 0, isDragging = false;

                header.addEventListener("mousedown", (e) => {
                    isDragging = true;
                    const rect = windowDiv.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    windowDiv.style.cursor = "grabbing";
                    
                    // Traer la ventana al frente cuando se empiece a arrastrar
                    windowDiv.style.zIndex = getHighestZIndex() + 1;
                    
                    e.preventDefault();
                });

                // Tambi茅n traer al frente cuando se haga click en cualquier parte de la ventana
                windowDiv.addEventListener("mousedown", () => {
                    windowDiv.style.zIndex = getHighestZIndex() + 1;
                });

                document.addEventListener("mousemove", (e) => {
                    if (isDragging) {
                        windowDiv.style.left = `${e.clientX - offsetX}px`;
                        windowDiv.style.top = `${e.clientY - offsetY}px`;
                    }
                });

                document.addEventListener("mouseup", () => {
                    isDragging = false;
                    windowDiv.style.cursor = "default";
                });
            }

            function addResizeFunctionality(windowDiv) {
                let resizeHandle = windowDiv.querySelector(".resize-handle");
                let isResizing = false, startWidth, startHeight, startMouseX, startMouseY;

                resizeHandle.addEventListener("mousedown", (e) => {
                    isResizing = true;
                    startWidth = windowDiv.offsetWidth;
                    startHeight = windowDiv.offsetHeight;
                    startMouseX = e.clientX;
                    startMouseY = e.clientY;
                    e.preventDefault();
                });

                document.addEventListener("mousemove", (e) => {
                    if (isResizing) {
                        let newWidth = startWidth + (e.clientX - startMouseX);
                        let newHeight = startHeight + (e.clientY - startMouseY);

                        // Aplica el tama帽o m铆nimo (puedes personalizar por aplicaci贸n)
                        let minWidth = 200;  // Tama帽o m铆nimo personalizable
                        let minHeight = 150; // Tama帽o m铆nimo personalizable
                        
                        if (newWidth >= minWidth) {
                            windowDiv.style.width = `${newWidth}px`;
                        }
                        if (newHeight >= minHeight) {
                            windowDiv.style.height = `${newHeight}px`;
                        }
                    }
                });

                document.addEventListener("mouseup", () => {
                    isResizing = false;
                });
            }

        });
    </script>
</body>

</html>