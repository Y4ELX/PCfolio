<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yael Monterrubio</title>
    <style>
        @font-face {
            font-family: pixel;
            src: url(assets/pixel.ttf);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: pixel;
            user-select: none;
            overflow: hidden;
        }

        p {
            margin-top: 10px;
            text-align: center;
            color: #40FF23;
        }

        .mainDiv {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            background-color: #f1f1f1;
        }

        .desktop {
            height: calc(92% - 20px);
            width: calc(100% - 20px);
            padding: 10px;
            background-color: #151924;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
        }

        .taskbar {
            height: 8%;
            width: 100%;
            background-color: #0c0e14;
            padding-left: 10px;
            display: flex;
            align-items: center;
        }

        .divicon {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 10px;
            width: fit-content;
            cursor: pointer;
        }

        .divicon img {
            width: 50px;
            height: 50px;
        }

        .window {
            height: 60vh;
            width: 60vw;
            position: absolute;
            top: 50px;
            left: 50px;
            min-width: 20px;
            min-height: 20px;
            background-color: #151924;
            border: solid 3px #40FF23;
            padding: 3px;
            resize: both;
            overflow: hidden;
        }

        .window-header {
            height: 25px;
            background-color: #40FF23;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px;
            cursor: grab;
        }

        .close-btn {
            cursor: pointer;
            height: 100%;
            width: 25px;
            background-color: #151924;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #40FF23;
        }

        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 15px;
            height: 15px;
            background-color: #40FF23;
            cursor: nwse-resize;
        }

        .divicon>p {
            font-size: 13px;
        }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .window-content{
            height: calc(100% - 30px);
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="mainDiv">
        <div class="desktop">
            <div class="divicon" data-title="My PC">
                <img src="assets/mypc.png" alt="">
                <p>My PC</p>
            </div>
            <div class="divicon" data-title="New Folder">
                <img src="assets/folder.png" alt="">
                <p>NewF</p>
            </div>
            <div class="divicon" data-title="Browser">
                <img src="assets/navegador.png" alt="">
                <p>Browser</p>
            </div>
        </div>
        <div class="taskbar">
            <img src="assets/logoyael.png" style="height: 70%;" alt="">
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let desktop = document.querySelector(".desktop");
            let icons = document.querySelectorAll(".divicon");
            let windowCount = 0;

            icons.forEach(icon => {
                icon.addEventListener("click", () => createWindow(icon.getAttribute("data-title")));
            });

            function createWindow(title) {
                windowCount++;

                let windowDiv = document.createElement("div");
                windowDiv.classList.add("window");
                windowDiv.style.opacity = 0;
                windowDiv.style.transform = "scaleY(0)";
                windowDiv.style.transition = "0.3s ease-in";

                setTimeout(() => {
                    windowDiv.style.transform = "scaleY(1)";
                    windowDiv.style.opacity = 1;
                    setTimeout(() => {
                        windowDiv.style.transition = "none";
                    }, 300);
                }, 50);
                windowDiv.style.top = `${110 + windowCount * 20}px`;
                windowDiv.style.left = `${260 + windowCount * 20}px`;

                // Si el título es "Browser", agrega un iframe
                let content = title === "Browser" ? `<iframe style="width: 100%; height: 100%;" src="https://github.com/Y4ELX"></iframe>` : `<p>Contenido de ${title}</p>`;

                windowDiv.innerHTML = `
                    <div class="window-header">
                        <span>${title}</span>
                        <div class="close-btn">X</div>
                    </div>
                    <div class="window-content">
                        ${content}
                    </div>
                    <div class="resize-handle"></div>
                `;

                document.body.appendChild(windowDiv);

                addDragFunctionality(windowDiv);
                addResizeFunctionality(windowDiv);

                windowDiv.querySelector(".close-btn").addEventListener("click", () => {
                    windowDiv.style.transition = "0.3s ease-out"; 
                    windowDiv.style.opacity = 0; 
                    windowDiv.style.transform = "scaleY(0)"; 

                    setTimeout(() => {
                        windowDiv.remove();
                    }, 300);
                });
            }

            function addDragFunctionality(windowDiv) {
                let header = windowDiv.querySelector(".window-header");
                let offsetX = 0, offsetY = 0, isDragging = false;

                header.addEventListener("mousedown", (e) => {
                    isDragging = true;
                    const rect = windowDiv.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    windowDiv.style.cursor = "grabbing";
                    e.preventDefault();
                });

                document.addEventListener("mousemove", (e) => {
                    if (isDragging) {
                        windowDiv.style.left = `${e.clientX - offsetX}px`;
                        windowDiv.style.top = `${e.clientY - offsetY}px`;
                    }
                });

                document.addEventListener("mouseup", () => {
                    isDragging = false;
                    windowDiv.style.cursor = "default";
                });
            }

            function addResizeFunctionality(windowDiv) {
                let resizeHandle = windowDiv.querySelector(".resize-handle");
                let isResizing = false, startWidth, startHeight, startMouseX, startMouseY;

                resizeHandle.addEventListener("mousedown", (e) => {
                    isResizing = true;
                    startWidth = windowDiv.offsetWidth;
                    startHeight = windowDiv.offsetHeight;
                    startMouseX = e.clientX;
                    startMouseY = e.clientY;
                    e.preventDefault();
                });

                document.addEventListener("mousemove", (e) => {
                    if (isResizing) {
                        let newWidth = startWidth + (e.clientX - startMouseX);
                        let newHeight = startHeight + (e.clientY - startMouseY);

                        // Aplica el tamaño mínimo de 20px
                        if (newWidth >= 20) {
                            windowDiv.style.width = `${newWidth}px`;
                        }
                        if (newHeight >= 20) {
                            windowDiv.style.height = `${newHeight}px`;
                        }
                    }
                });

                document.addEventListener("mouseup", () => {
                    isResizing = false;
                });
            }

        });
    </script>
</body>

</html>